#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ è¿è¡Œpre-pushæ£€æŸ¥..."

# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
echo "ğŸ§ª è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶..."
npm run test:coverage

if [ $? -ne 0 ]; then
  echo "âŒ æµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥å¤±è´¥ï¼Œè¯·æé«˜æµ‹è¯•è¦†ç›–ç‡"
  exit 1
fi

# æ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸ
echo "ğŸ—ï¸ æ£€æŸ¥æ„å»º..."
npm run build

if [ $? -ne 0 ]; then
  echo "âŒ æ„å»ºå¤±è´¥ï¼Œè¯·ä¿®å¤æ„å»ºé”™è¯¯"
  exit 1
fi

echo "âœ… Pre-pushæ£€æŸ¥é€šè¿‡ï¼"
exit 0